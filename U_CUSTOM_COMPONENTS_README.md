# U - 自定义组件文档

## 概述
本文档记录了用户添加的自定义 5G 核心网组件，这些组件不是原始 Open5GS 代码库的一部分。

## 自定义组件列表

### 1. DF (Data Forwarding) - 数据转发组件
- **目录**: 
- **功能**: 负责用户面数据转发，通过 GTP-U 协议处理数据包
- **配置文件**: 
  - 
  - 
- **主要文件**:
  -  - 组件初始化
  -  - 上下文管理
  -  - DN3 接口处理
  -  - NDF 消息处理

### 2. DMF (Data Management Function) - 数据管理功能
- **目录**: 
- **功能**: 管理 gNB 注册和 RAN 地址信息，转发给 DSMF
- **配置文件**: 
  - 
  - 
- **主要文件**:
  -  - 组件初始化
  -  - 上下文管理
  -  - 状态机
  -  - SBI 接口
  -  - NRF 处理

### 3. DSMF (Data Session Management Function) - 数据会话管理功能
- **目录**: 
- **功能**: 管理数据会话，处理 PFCP 协议，与 DF 建立会话
- **配置文件**: 
  - 
  - 
- **主要文件**:
  -  - 组件初始化
  -  - 上下文管理
  -  - 状态机
  -  - SBI 接口
  -  - PFCP 消息构建
  -  - PFCP 消息处理

### 4. DNF (Data Network Function) - 数据网络功能
- **目录**: 
- **功能**: 数据网络功能组件（待实现）
- **配置文件**: 待添加
- **主要文件**: 待实现

## 组件间关系


## 协议支持
- **SBI (Service-Based Interface)**: HTTP/2, 用于组件间通信
- **PFCP (Packet Forwarding Control Protocol)**: 用于 DSMF 和 DF 之间的会话管理
- **GTP-U**: 用于 DF 的用户面数据转发

## 配置端口
- **DF PFCP 客户端**: 8805
- **DSMF PFCP 服务器**: 8806
- **DF DN3 (GTP-U)**: 2153
- **DMF SBI 服务器**: 7777
- **DSMF SBI 服务器**: 7778

## 注意事项
1. 这些组件是实验性的，可能包含未完成的实现
2. 组件间的通信协议和接口可能随开发进展而变化
3. 建议在测试环境中使用，生产环境需要进一步验证

## 开发状态
- [x] DF: 基础实现完成，支持 GTP-U 数据转发
- [x] DMF: 基础实现完成，支持 gNB 注册和 RAN 信息管理
- [x] DSMF: 基础实现完成，支持 PFCP 会话管理
- [ ] DNF: 待实现

## 最后更新
2025年 08月 20日 星期三 11:16:14 CST
